<html>
<head>
    <title>Modify Course</title>
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
</head>
<body>
<br>
<div class="container">
    <nav class="navbar" role="navigation">
        <div>
            <ul class="nav nav-tabs navbar-left">
                <li role="presentation"><a href="/ims/home/">个人首页</a></li>
                <li role="presentation" class="active"><a href="/ims/course/">课程信息管理</a></li>
                <li role="presentation"><a href="/ims/user/">用户信息管理</a></li>
                <li role="presentation"><a href="/ims/home/profile/">个人信息管理</a></li>
                <li role="presentation"><a href="/ims/logout/">退出登录</a></li>
            </ul>
            <ul class="nav navbar-right">

            </ul>
        </div>
    </nav>

    <h1>Search Courses for Modification</h1>
    {% if errors %}
        <ul>
            {% for error in errors %}
                <p style="color: red">{{ error }}</p>
            {% endfor %}
        </ul>
    {% endif %}
    <form id = 'formSearch' action="" method="post">
        {% csrf_token %}
        <input type="text" name="term">
        <select id="type" name="type">
            <option value ="course_id">Course ID</option>
            <option value ="course_name">Course Name</option>
            <option value="credits">Credits</option>
            <option value="semester">Semester</option>
            <option value="textbook">Textbook</option>
            <option value="college">College</option>
            <option value="course_type">Type</option>
        </select>
        <input type="submit" value="Search Couse">
    </form>

    {% if modifyIsDone %}
        <p style="color: blue;">
            Course Modified successfully.
        </p>
    {% endif %}

    {% if inModify %}
        <p>Course ID: {{ courseId }}</p>
        <!-- TODO: 添加各自学院课程，目前多余 -->
        {% if facultyModify %}
            <p>College: {{ userCollege }}</p>
        {% endif %}
        <form id="submit" action="" method="post">
            {% csrf_token %}
            <table>
                {{ form.as_table }}
            </table>
            <input type="submit" value="Submit">
            <input type="hidden" name = "courseId" value={{ courseId }}>
        </form>
    {% else %}
        <form id='formSelect' action="" method="post">
            {% csrf_token %}
            {% if courses %}
                <p>Found {{ courses | length }} course{{ courses | pluralize }}.</p>
                <table>
                    <tr>
                        <th>Course ID</th>
                        <th>Course Name</th>
                        <th>Credits</th>
                        <th>Semester</th>
                        <th>Textbook</th>
                        <th>College</th>
                        <th>Type</th>
                    </tr>
                    {% for course in courses %}
                        <tr>
                            <th>{{ course.course_id }}</th>
                            <th>{{ course.name }}</th>
                            <th>{{ course.credits }}</th>
                            <th>{{ course.semester }}</th>
                            <th>{{ course.textbook }}</th>
                            <th>{{ course.college }}</th>
                            <th>{{ course.course_type }}</th>
                            <th><input type="button" name="course" value="modify" onclick="javascript:f('{{course.course_id}}')"></th>
                        </tr>
                    {% endfor %}
                </table>
            {% else %}
                {% if inSearch %}
                    <p>No course found.</p>
                {% endif %}
            {% endif %}
            <input type="hidden" name="modifyid" id="modifyid">
        </form>
    {% endif %}
</div>
</body>
</html>

<script type="text/javascript">
    function f(a) {
        var form = document.getElementById("formSelect");
        form.modifyid.value = a;
        form.submit();
    }
</script>
